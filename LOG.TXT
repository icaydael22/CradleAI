 LOG  [ScriptService] å‰§æœ¬ script_1758791498128 å†å²åˆ†æ: 0 æ¡å·²æ€»ç»“, 2 æ¡æœªæ€»ç»“
 LOG  [ScriptService] å¼€å§‹å¢é‡æ€»ç»“å‰§æœ¬ script_1758791498128ï¼Œæ€»ç»“ 2 æ¡æœªæ€»ç»“æ¶ˆæ¯
 LOG  [MemoryService] summarizeScriptContent called for script script_1758791498128    
 LOG  [MemoryService] Content length: 2126 characters
 LOG  [MemoryService] Requesting script summary from unified API with custom settings  
 LOG  [OpenAIAdapter] åˆå§‹åŒ–ï¼Œendpoint: https://buddy.cradleintro.top/v1/chat/completions, model: gemini-2.5-flash
 LOG  [OpenAIAdapter][è¡¨æ ¼è®°å¿†] characterIdå‚æ•°å€¼: script_1758791498128 string
 LOG  [OpenAIAdapter][è¡¨æ ¼è®°å¿†] è°ƒç”¨ getCharacterTablesData å‰å‚æ•°: {"characterId": "script_1758791498128"}
 LOG  [TableMemory] getCharacterTablesData - è·å–è§’è‰² ID: "script_1758791498128" çš„è¡¨æ ¼
æ•°æ®
 LOG  [TableMemory] æ‰¾åˆ° 0 ä¸ªè¡¨æ ¼æ•°æ®
 LOG  [OpenAIAdapter][è¡¨æ ¼è®°å¿†] getCharacterTablesData è¿”å›: {"success": true, "tables": []}
 LOG  [OpenAIAdapter][è¡¨æ ¼è®°å¿†] æœªè·å–åˆ°æœ‰æ•ˆè¡¨æ ¼æ•°æ®ï¼Œsuccess: true tables.length: 0   
 LOG  [OpenAIAdapter] å‘é€è¯·æ±‚åˆ°APIï¼Œå…± 2 æ¡æ¶ˆæ¯
 LOG  [OpenAIAdapter] å‘é€chatCompletionè¯·æ±‚ FULL: {
  "url": "https://buddy.cradleintro.top/v1/chat/completions",
  "headers": {
    "Content-Type": "application/json",
    "Authorization": "Bearer ***"
  },
  "data": {
    "model": "gemini-2.5-flash",
    "messages": [
      {
        "role": "system",
        "content": "ä½ æ˜¯å¯¹è¯æ€»ç»“åŠ©æ‰‹ï¼Œè¯·è¾“å‡ºç®€æ´ã€ç»“æ„åŒ–çš„ä¸­æ–‡æ‘˜è¦ï¼Œä¿ç•™äººç‰©å…³ç³»ã€æ„å›¾ 
ã€è®¡åˆ’ã€å·²è¾¾æˆäº‹é¡¹ä¸æœªè§£å†³é—®é¢˜ï¼Œä¸è¦ç‚¹è¯„ã€‚"
      },
      {
        "role": "user",
        "content": "å¾…æ€»ç»“çš„å‰§æœ¬å†…å®¹ï¼š\n=== ç¬¬ 1 è½® ===\nç”¨æˆ·è¾“å…¥: \nå‰§æƒ…å‘å±•: <Format>\r\n<Narrative>\r\nchangeBg:ç™½å¤©-ä¸­æµ·å¤§å­¦æ ¡å›­.bg\r\næ—ç™½:2021å¹´ç§‹ï¼Œä¸­æµ·å¸‚å¤§å­¦ã€‚å¯¹äºæˆ‘ï¼Œ
Playerï¼Œåˆšä»åå…«çº¿å°å¿åŸè€ƒå‡ºæ¥çš„å¥‹æ–—Xæ¥è¯´ï¼Œè¿™é‡Œçš„ä¸€åˆ‡éƒ½é—ªé—ªå‘å…‰â€”â€”é™¤äº†æˆ‘æ€€é‡Œè¿™æ‘èƒ½æŠŠäººå‹
æˆäºŒç»´ç”Ÿç‰©çš„æ–°ç”Ÿæ•™æã€‚ -memory.fx\r\næˆ‘:â€œè¿™ç©æ„å„¿ç»å¯¹æ¯”æˆ‘çš„ä½“é‡è¿˜æ²‰â€¦â€¦å¯æ¶ï¼Œæ—©çŸ¥é“å°±ä¸é€‰
è¿™ä¸ªå·ç§°â€˜çŸ¥è¯†æ”¹å˜å‘½è¿â€™ä½†æ•™æè¦äººå‘½çš„ä¸“ä¸šäº†ã€‚\r\næ—ç™½:æˆ‘ä¸€è¾¹å°å£°ç¢ç¢å¿µï¼Œä¸€è¾¹ä½å¤´çœ‹ç€æ‰‹æœº
ä¸Šçš„æ ¡å›­åœ°å›¾ï¼Œè¯•å›¾åœ¨å¼€å­¦ç¬¬ä¸€å¤©çš„äººæ½®ä¸­ï¼Œå¼ºè¡Œèµ°å‡ºä¸€æ¡å±äºæˆ‘çš„å…­äº²ä¸è®¤çš„æ­¥ä¼ã€‚\r\næ—ç™½:å°±
åœ¨è¿™æ—¶ï¼Œæ‰‹æœºå±å¹•â€œå®â€åœ°äº®èµ·ï¼Œä¸€æ¡ç¤¾å›¢æ‹›æ–°çš„èŠ±å“¨æ¨é€å¼¹äº†å‡ºæ¥ã€‚\r\næˆ‘:â€œâ€˜ä¸­æµ·å¤§å­¦è¶…è‡ªç„¶ç°è±¡
ç ”ç©¶ç¤¾â€™ï¼Ÿç°åœ¨çš„å°å­©çœŸæ˜¯ï¼Œå—¯ï¼Ÿâ€\r\næ—ç™½:å°±è¿™ä¸€ç§’çš„åˆ†ç¥ï¼Œæˆ‘â€œå’šâ€çš„ä¸€å£°ï¼Œç»“ç»“å®å®åœ°æ’ä¸Šäº†ä¸€
å µâ€œå¢™â€ï¼Ÿ -æ’å‡».sfx\r\næ—ç™½:æ€€é‡Œçš„æ•™æä»¬å¦‚åŒä¸€ç¾¤è§†æ­»å¦‚å½’çš„æ•¢æ­»é˜Ÿï¼Œçº·çº·å‘ç€å››é¢å…«æ–¹è‹±å‹‡å°±
ä¹‰ã€‚\r\næ—ç™½:ä¸–ç•Œç¬é—´é™·å…¥äº†å°´å°¬çš„é™æ­¢ã€‚\r\næˆ‘:â€œå•Šï¼å¯¹ã€å¯¹ä¸èµ·ï¼æˆ‘ä¸æ˜¯æ•…æ„çš„ï¼çœŸçš„ï¼â€æˆ‘ 
ä¸€è¾¹ç–¯ç‹‚é èº¬é“æ­‰ï¼Œä¸€è¾¹æ‰‹å¿™è„šä¹±åœ°å‡†å¤‡æ”¶æ‹¾æ®‹å±€ã€‚\r\nchangeFigure:å¸æ¾ˆ-æ­£å¸¸.sprite\r\næ—ç™½
:ç„¶è€Œï¼Œé‚£å µâ€œå¢™â€å¹¶æ²¡æœ‰å‘å‡ºä»»ä½•è´£å¤‡çš„å£°éŸ³ã€‚æˆ‘å°å¿ƒç¿¼ç¿¼åœ°æŠ¬èµ·å¤´ï¼Œç„¶åâ€”â€”å‘¼å¸åœæ»äº†åŠç§’ã€‚\r\næ—ç™½:é˜³å…‰æ­£å·§è½åœ¨ä»–æ·±æ£•è‰²çš„å‘ä¸ä¸Šï¼Œå‹¾å‹’å‡ºæŸ”å’Œçš„è½®å»“ï¼Œè€Œé‚£åŒçœ¼çœ¸é‡Œï¼Œä»¿ä½›å†°é¢ä¸‹å°å†»ç€ä¸‡åƒ
æ˜Ÿè¾°ï¼Œæ­¤åˆ»æ­£å®‰é™åœ°çœ‹ç€æˆ‘ã€‚\r\næ—ç™½:å¥‡æ€ªçš„æ˜¯ï¼Œä»–çš„çœ¼ç¥é‡Œæ²¡æœ‰è¢«æ’åˆ°çš„æ¼æ€’ï¼Œåè€Œåƒæ˜¯é€è¿‡æˆ‘
ï¼Œåœ¨çœ‹ä»€ä¹ˆæ›´é¥è¿œçš„ä¸œè¥¿ï¼Œå¸¦ç€ä¸€ç§è®©äººå¿ƒç–¼çš„ç–²æƒ«ã€‚\r\nå¸æ¾ˆ:â€œâ€¦â€¦â€\r\næˆ‘:â€œé‚£ä¸ªï¼Œå¸…å“¥ï¼Ÿä½ è¿˜å¥½
å—ï¼Ÿâ€\r\næ—ç™½:ä»–ä¼¼ä¹è¿™æ‰å›è¿‡ç¥ï¼Œè§†çº¿ç»ˆäºèšç„¦åœ¨æˆ‘è„¸ä¸Šã€‚\r\nå¸æ¾ˆ:â€œæ²¡å…³ç³»ã€‚â€\r\næ—ç™½:ä»–çš„ 
å£°éŸ³å¾ˆå¥½å¬ï¼Œåƒåˆé›ªè½åœ¨ç´å¼¦ä¸Šï¼Œæ¸…å†·åˆå¹²å‡€ã€‚ä½†ä¸çŸ¥é“æ˜¯ä¸æ˜¯æˆ‘çš„é”™è§‰ï¼Œä»–å¼€å£çš„ç¬é—´ï¼Œå‘¨å›´å–§ 
é—¹çš„äººå£°ã€é£å£°ã€å¶å­æ‘©æ“¦çš„å£°éŸ³å¥½åƒéƒ½å˜å¾—ä¸é‚£ä¹ˆåˆºè€³äº†ã€‚\r\nå¸æ¾ˆ:â€œæ˜¯æˆ‘æŒ¡è·¯äº†ã€‚â€\r\næ—ç™½: 
è¯´ç€ï¼Œä»–å·²ç»è‡ªç„¶åœ°è¹²ä¸‹èº«ï¼Œå¼€å§‹å¸®æˆ‘æ¡æ‹¾é‚£äº›æ•£è½çš„ä¹¦æœ¬ã€‚é‚£åŒéª¨èŠ‚åˆ†æ˜çš„æ‰‹ï¼Œä¿®é•¿åˆç™½çš™ï¼Œç®€ 
ç›´åƒæ˜¯å¼¹é’¢ç´çš„ã€‚\r\næˆ‘:â€œä¸ä¸ä¸ï¼Œæ˜¯æˆ‘çš„é”™ï¼æˆ‘æ¥æˆ‘æ¥ï¼â€æˆ‘èµ¶ç´§ä¹Ÿè¹²ä¸‹å»ï¼Œç”Ÿæ€•å†ç»™ä»–æ·»éº»çƒ¦ã€‚
\r\næ—ç™½:ç„¶åï¼Œç»å…¸çš„é’æ˜¥å‰§æ¡¥æ®µå‘ç”Ÿäº†â€”â€”æˆ‘ä»¬åŒæ—¶ä¼¸å‘äº†åŒä¸€æœ¬ä¹¦ï¼Œã€Šé‡å­ç‰©ç†å¯¼è®ºã€‹ã€‚\r\næ—
ç™½:åœ¨é‚£ä¸ªç¬é—´ï¼Œæˆ‘çš„æŒ‡å°–ï¼Œè½»è½»åœ°ã€ä¸å¯é¿å…åœ°ï¼Œè§¦ç¢°åˆ°äº†ä»–çš„æ‰‹èƒŒã€‚\r\næ—ç™½:æ²¡æœ‰é™ç”µã€‚\r\n 
æ—ç™½:ä½†æ˜¯ï¼Œä¸€ç§æ¯”é™ç”µæ›´å¥‡å¼‚çš„æ„Ÿè§‰ä¼ éå…¨èº«ã€‚ -å¿ƒè·³.sfx\r\næ—ç™½:ä¸–ç•Œï¼Œä»¿ä½›è¢«æŒ‰ä¸‹äº†é™éŸ³é”® 
ã€‚\r\nchangeFigure:å¸æ¾ˆ-æ€ç´¢.sprite\r\næ—ç™½:å¹¶éçœŸçš„æ²¡æœ‰å£°éŸ³äº†ï¼Œè€Œæ˜¯è„‘æµ·é‡Œé‚£å±‚æ°¸è¿œå­˜åœ¨ 
çš„ã€å¦‚åŒç”µè§†é›ªèŠ±ç‚¹èˆ¬çš„èƒŒæ™¯â€œå™ªéŸ³â€ï¼Œç¬¬ä¸€æ¬¡æ¶ˆå¤±äº†ã€‚æ•´ä¸ªä¸–ç•Œå˜å¾—å‰æ‰€æœªæœ‰çš„æ¸…æ¾ˆã€å¹²å‡€ã€‚\r\n 
æ—ç™½:è€Œçœ¼å‰çš„å¸æ¾ˆï¼Œèº«ä½“çŒ›åœ°ä¸€åƒµã€‚ä»–é‚£åŒç¢§è“è‰²çš„çœ¼çœ¸ç¬é—´çå¤§ï¼Œæ­»æ­»åœ°ç›¯ç€æˆ‘ä»¬ç›¸è§¦çš„åœ°æ–¹ï¼Œ
é‚£ä»½æƒŠæ„•è¿œæ¯”æˆ‘è¿™ä¸ªâ€œè‚‡äº‹è€…â€è¦å¼ºçƒˆä¸€ä¸‡å€ã€‚\r\nå¸æ¾ˆ:ä»–çŒ›åœ°ç¼©å›äº†æ‰‹ï¼åŠ¨ä½œå¿«å¾—åƒè¢«ç¼ä¼¤ã€‚\r\næ—-ç™½:ä»–æ²¡æœ‰çœ‹æˆ‘ï¼Œè€Œæ˜¯ç”¨å¦ä¸€åªæ‰‹æŒ‰ä½äº†è‡ªå·±çš„å¤ªé˜³ç©´ï¼Œé—­ä¸Šçœ¼ç›ï¼Œè„¸ä¸Šé‚£ç§æ·±é‡çš„ç–²æƒ«æ„Ÿï¼Œç«Ÿ 
ç„¶è‚‰çœ¼å¯è§åœ°è¤ªå»äº†å‡ åˆ†ï¼Œå–è€Œä»£ä¹‹çš„æ˜¯ä¸€ç§æåº¦å›°æƒ‘å’Œä¸æ•¢ç½®ä¿¡ã€‚\r\næˆ‘:â€œä½ æ˜¯ä¸æ˜¯å“ªé‡Œä¸èˆ’æœ 
ï¼Ÿâ€æˆ‘å°å£°åœ°é—®ï¼Œç°åœ¨è½®åˆ°æˆ‘æ‹…å¿ƒä»–äº†ï¼Œâ€œä½ è„¸è‰²çœ‹èµ·æ¥ä¸å¤ªå¥½ã€‚â€\r\næ—ç™½:ä»–ç¼“ç¼“çå¼€çœ¼ï¼Œé‚£åŒè“ 
çœ¼ç›ä¸€ç¬ä¸ç¬åœ°é”ç€æˆ‘ï¼Œä»¿ä½›è¦åœ¨æˆ‘è„¸ä¸Šé’»å‡ºä¸¤ä¸ªæ´æ¥ã€‚é‚£ç§ä¸“æ³¨ï¼Œè®©æˆ‘å¿ƒè·³è«åæ¼äº†ä¸€æ‹ã€‚\r\n 
å¸æ¾ˆ:â€œæˆ‘æ²¡äº‹ã€‚â€ä»–é¡¿äº†é¡¿ï¼Œå£°éŸ³é‡Œå¸¦ç€ä¸€ä¸è‡ªå·±éƒ½æ²¡å¯Ÿè§‰çš„é¢¤æŠ–ï¼Œâ€œæˆ‘å¾ˆå¥½ã€‚â€\r\nç‰¹æ®Šå™äº‹:[ä¸€ç§
å‰æ‰€æœªæœ‰çš„ã€å¦‚åŒæººæ°´è€…å‘¼å¸åˆ°ç¬¬ä¸€å£æ–°é²œç©ºæ°”èˆ¬çš„è½»æ¾æ„Ÿï¼ŒåŒ…è£¹ç€ä»–ã€‚] -memory.fx\r\næ—ç™½:ä»–
ç«™èµ·èº«ï¼Œå°†æ¡å¥½çš„ä¹¦é€’ç»™æˆ‘ï¼Œè¿™ä¸€æ¬¡ï¼Œä»–åˆ»æ„é¿å¼€äº†ä»»ä½•å¯èƒ½çš„è‚¢ä½“æ¥è§¦ã€‚\r\næ—ç™½:ç„¶è€Œï¼Œå°±åœ¨ä»–
èˆ’å±•çœ‰å¤´çš„ç¬é—´ï¼Œä»–åƒæ˜¯å¿½ç„¶æ„ŸçŸ¥åˆ°äº†ä»€ä¹ˆï¼ŒçŒ›åœ°è¹™çœ‰ï¼Œç¢§è“çš„ç³å­”éª¤ç„¶æ”¶ç¼©ï¼Œè§†çº¿é”åˆ©åœ°è¶Šè¿‡æˆ‘ 
çš„è‚©è†€ï¼Œæœ›å‘é“¶æå¤§é“çš„å¦ä¸€å¤´ã€‚\r\næ—ç™½:é‚£é‡Œäººæ¥äººå¾€ï¼Œä»€ä¹ˆéƒ½æ²¡æœ‰ã€‚\r\næ—ç™½:ä½†ä»–è„¸ä¸Šä¸€é—ª 
è€Œè¿‡çš„å†°å†·ä¸è­¦æƒ•ï¼Œå´å’Œæˆ‘åˆšåˆšè®¤è¯†çš„é‚£ä¸ªæ¸©æŸ”å­¦é•¿åˆ¤è‹¥ä¸¤äººã€‚\r\næ—ç™½:é‚£ä»½è½¬ç¬å³é€çš„æ•Œæ„ï¼Œè®©
æˆ‘åèƒŒçªœèµ·ä¸€é˜µå‡‰æ„ã€‚\r\nchangeFigure:å¸æ¾ˆ-å¾®ç¬‘.sprite\r\nå¸æ¾ˆ:â€œä½ å«ä»€ä¹ˆåå­—ï¼Ÿâ€ä»–æ”¶å›è§† 
çº¿ï¼Œé‡æ–°å¯¹æˆ‘éœ²å‡ºä¸€ä¸ªæ¸©å’Œçš„å¾®ç¬‘ï¼Œä»¿ä½›åˆšæ‰çš„ä¸€åˆ‡åªæ˜¯æˆ‘çš„é”™è§‰ã€‚\r\n</Narrative>\r\n<options>\r\n[æˆ‘å«Playerï¼Œä½ å‘¢ï¼Ÿ]\r\n[ä½ é—®è¿™ä¸ªåšä»€ä¹ˆï¼Ÿ]\r\n[ï¼ˆæ²¡æœ‰å›ç­”ï¼Œåªæ˜¯è­¦æƒ•åœ°çœ‹ç€ä»–ï¼‰]\r\n</options>\r\n<script_actions>\r\n  <Analysis>\r\n    currentTime: Yes\r\n    chapterDeadlines: No\r\n    goodwill_SiChe: Yes\r\n    chapter_1_completed: No\r\n    currentLocation: ä¸­æµ·å¤§å­¦é“¶æé“\r\n  </Analysis>\r\n  <setVar>currentTime=2021-09-01T08:30:00Z</setVar>\r\n</script_actions>\r\n</Format>"
      }
    ],
    "temperature": 0.7,
    "max_tokens": 32000,
    "stream": false
  }
}
 LOG  [OpenAIAdapter] å‘é€chatCompletionè¯·æ±‚: {"data": {"max_tokens": 32000, "messages": [[Object], [Object]], "model": "gemini-2.5-flash", "stream": false, "temperature": 0.7}, "headers": {"Authorization": "Bearer ***", "Content-Type": "application/json"}, "url": "https://buddy.cradleintro.top/v1/chat/completions"}
 LOG  [OpenAIAdapter] æ”¶åˆ°å“åº”: {"choices": [{"finish_reason": "stop", "index": 0, "message": [Object]}], "created": 1758791727, "id": "b2321725-188b-4345-99b3-836f5698cfa4", "model": "gemini-2.5-flash", "object": "chat.completion"}
 LOG  [OpenAIAdapter] APIè°ƒç”¨å®Œæˆï¼Œè€—æ—¶: 14517ms
 LOG  [OpenAIAdapter] æˆåŠŸæ¥æ”¶å“åº”ï¼Œé•¿åº¦: 658
 LOG  [OpenAIAdapter] å“åº”å‰100ä¸ªå­—ç¬¦: **äººç‰©å…³ç³»**
*   **Player**ï¼šä¸­æµ·å¤§å­¦æ–°ç”Ÿï¼Œæ¥è‡ªå°å¿åŸï¼Œå¯¹æ–°ç¯å¢ƒæ„Ÿåˆ°ä¸é€‚ä½†ç§¯æé€‚åº”ã€‚
*   **å¸æ¾ˆ**ï¼šä¸€ååœ¨æ ¡å›­å†…ä¸Playerç›¸æ’çš„ç¥ç§˜å­¦ç”Ÿï¼Œå¤–è²Œå‡ºä¼—ï¼Œçœ¼ç¥ç–²æƒ«ï¼Œå¯¹è§¦ç¢°æœ‰å¼‚å¸¸...  
 LOG  [MemoryService] Generated script summary: **äººç‰©å…³ç³»**
*   **Player**ï¼šä¸­æµ·å¤§å­¦æ–°ç”Ÿï¼Œæ¥è‡ªå°å¿åŸï¼Œå¯¹æ–°ç¯å¢ƒæ„Ÿåˆ°ä¸é€‚ä½†ç§¯æé€‚åº”ã€‚
*   **å¸æ¾ˆ**ï¼šä¸€ååœ¨æ ¡å›­å†…ä¸Playerç›¸æ’çš„ç¥ç§˜å­¦ç”Ÿï¼Œå¤–è²Œå‡ºä¼—ï¼Œçœ¼ç¥ç–²æƒ«ï¼Œå¯¹è§¦ç¢°æœ‰å¼‚å¸¸...  
 LOG  [ScriptService] å‰§æœ¬ script_1758791498128 å¢é‡æ€»ç»“å®Œæˆï¼Œå°† 2 æ¡æ¶ˆæ¯æ€»ç»“ä¸º 1 æ¡æ€» 
ç»“æ¶ˆæ¯
 LOG  [ScriptService] å½“å‰å†å²ç»“æ„: 0 æ¡å†å²æ€»ç»“ + 1 æ¡æ–°æ€»ç»“ + 1 æ¡æœ€æ–°åŸå§‹æ¶ˆæ¯ (è¢«ä¿ 
ç•™, id=msg_1758791684880)
 LOG  [Character] Screen focused
 WARN  [Layout children]: No route named "map" exists in nested children: ["Character", "explore", "index", "profile"]
 WARN  [Layout children]: No route named "fmg-test" exists in nested children: ["Character", "explore", "index", "profile"]
 WARN  [Layout children]: No route named "relationship-graph" exists in nested children: ["MemoOverlay", "SaveManager", "UtilSettings", "[conversationId]", "[groupId]", "api-settings", "character-detail", "chat-ui-settings", "create-post", "create_char", "custom-settings-manager", "debug-tools", "discord-auth-debug", "edit-field", "favorites", "global-settings", "log", "plugins", "script-detail", "script-summaries", "storage-manager", "token-planner", "tts-enhancer-guide", "group/[groupId]", "script/[scriptid]"]     
 LOG  [Performance] Creating AutoMessageService instance
 LOG  [ChatDialog] Current dialog mode: normal paragraphModeEnabled: false
 LOG  [ChatDialog] Regeneration state change: {"curr": null, "prev": null}
 LOG  [Performance] Page focused
 WARN  [Layout children]: No route named "map" exists in nested children: ["Character", "explore", "index", "profile"]
 WARN  [Layout children]: No route named "fmg-test" exists in nested children: ["Character", "explore", "index", "profile"]
 LOG  [ChatDialog] Current dialog mode: normal paragraphModeEnabled: false
 LOG  [NodeSTManager] Setting search enabled to: false
 LOG  [StorageAdapter] Retrieving paginated chat history for conversation: 1758791534476, page: 1, pageSize: 15
 LOG  [StorageAdapter] Retrieving clean chat history for conversation: 1758791534476
 LOG  ã€CircleSchedulerã€‘å°è¯•ä»CharacterStorageServiceåŠ è½½è§’è‰²
 LOG  [StorageAdapter] Retrieving paginated chat history for conversation: 1758791534476, page: 2, pageSize: 15
 LOG  [StorageAdapter] Retrieving clean chat history for conversation: 1758791534476   
 LOG  [ChatDialog] Current dialog mode: normal paragraphModeEnabled: false
 LOG  ã€CircleSchedulerã€‘å°è¯•ä»CharacterStorageServiceåŠ è½½è§’è‰²
 LOG  [GroupState] Loaded 0 groups (filtered from 0)
 LOG  ã€CircleSchedulerã€‘ä»CharacterStorageServiceåŠ è½½äº†1ä¸ªè§’è‰²
 LOG  ã€CircleSchedulerã€‘ä»è§’è‰²ä¸­åŠ è½½äº†0ä¸ªå‘å¸ƒæ—¶é—´è®¾ç½®
 LOG  [ChatDialog] Current dialog mode: normal paragraphModeEnabled: false
 LOG  ã€CircleSchedulerã€‘å°è¯•ä»CharacterStorageServiceåŠ è½½è§’è‰²
 LOG  ã€CircleSchedulerã€‘ä»CharacterStorageServiceåŠ è½½äº†1ä¸ªè§’è‰²
 LOG  ã€CircleSchedulerã€‘ä»è§’è‰²ä¸­åŠ è½½äº†0ä¸ªå‘å¸ƒæ—¶é—´è®¾ç½®
 LOG  [StorageAdapter] Retrieved 1 clean messages
 LOG  [StorageAdapter] Retrieved 1 messages for page 1/1
 LOG  [StorageAdapter] Retrieved 1 clean messages
 LOG  [StorageAdapter] Retrieved 0 messages for page 2/1
 LOG  [AudioCacheManager] Cache initialized successfully
 LOG  ã€CircleSchedulerã€‘ä»CharacterStorageServiceåŠ è½½äº†1ä¸ªè§’è‰²
 LOG  ã€CircleSchedulerã€‘ä»è§’è‰²ä¸­åŠ è½½äº†0ä¸ªå‘å¸ƒæ—¶é—´è®¾ç½®
 LOG  [ChatDialog] Current dialog mode: normal paragraphModeEnabled: false
 LOG  [ChatDialog] Message msg_1758791734448_0.856841214347314 rendered at 17:15:34
 LOG  ã€CircleSchedulerã€‘å°è¯•ä»CharacterStorageServiceåŠ è½½è§’è‰²
 LOG  ã€CircleSchedulerã€‘ä»CharacterStorageServiceåŠ è½½äº†1ä¸ªè§’è‰²
 LOG  ã€CircleSchedulerã€‘ä»è§’è‰²ä¸­åŠ è½½äº†0ä¸ªå‘å¸ƒæ—¶é—´è®¾ç½®
 LOG  [ChatDialog] Current dialog mode: normal paragraphModeEnabled: false
 LOG  ã€CircleSchedulerã€‘å°è¯•ä»CharacterStorageServiceåŠ è½½è§’è‰²
 LOG  ã€CircleSchedulerã€‘ä»CharacterStorageServiceåŠ è½½äº†1ä¸ªè§’è‰²
 LOG  ã€CircleSchedulerã€‘ä»è§’è‰²ä¸­åŠ è½½äº†0ä¸ªå‘å¸ƒæ—¶é—´è®¾ç½®
 LOG  [useChatActions] å‘é€ç”¨æˆ·æ¶ˆæ¯: ä½ å¥½
 LOG  [ChatDialog] Current dialog mode: normal paragraphModeEnabled: false
 LOG  [ChatDialog] Message 1758791736496 rendered at 17:15:36
 LOG  ã€CircleSchedulerã€‘å°è¯•ä»CharacterStorageServiceåŠ è½½è§’è‰²
 LOG  [ChatDialog] Current dialog mode: normal paragraphModeEnabled: false
 LOG  [useChatActions] å¼€å§‹åŒä¸€è§’è‰²ç»§ç»­å¯¹è¯å¤„ç†...
 LOG  [NodeSTManager] Starting processChatMessage with params: {"characterId": "1758791534476", "conversationId": "1758791534476", "hasCharacter": true, "requestId": "req_1758791736748_qkqgrqznq", "status": "åŒä¸€è§’è‰²ç»§ç»­å¯¹è¯", "userMessage": "ä½ å¥½"}
 LOG  [NodeSTManager] Request already in progress, checking abort status
 LOG  [NodeSTManager] Calling NodeST.processChatMessage with conversationId: 1758791534476
 LOG  [NodeST] Creating new NodeSTCore instance
 LOG  [Geminié€‚é…å™¨] æœªé…ç½®æœ‰æ•ˆçš„APIå¯†é’¥
 LOG  [NodeSTCore] OpenRouter not enabled, using Gemini adapter only
 LOG  [OpenAIAdapter] åˆå§‹åŒ–ï¼Œendpoint: https://buddy.cradleintro.top/v1/chat/completions, model: gemini-2.5-flash
 LOG  [Geminié€‚é…å™¨] æœªé…ç½®æœ‰æ•ˆçš„APIå¯†é’¥
 LOG  [NodeSTCore] OpenRouter not enabled, using Gemini adapter only
 LOG  [OpenAIAdapter] åˆå§‹åŒ–ï¼Œendpoint: https://buddy.cradleintro.top/v1/chat/completions, model: gemini-2.5-flash
 LOG  [NodeSTCore] Loading character data with cache for 1758791534476
 LOG  [CharacterCache] Cache miss for 1758791534476, loading from disk
 LOG  ã€CircleSchedulerã€‘ä»CharacterStorageServiceåŠ è½½äº†1ä¸ªè§’è‰²
 LOG  ã€CircleSchedulerã€‘ä»è§’è‰²ä¸­åŠ è½½äº†0ä¸ªå‘å¸ƒæ—¶é—´è®¾ç½®
 LOG  ã€CircleSchedulerã€‘å°è¯•ä»CharacterStorageServiceåŠ è½½è§’è‰²
 LOG  [ChatDialog] Current dialog mode: normal paragraphModeEnabled: false
 LOG  ã€CircleSchedulerã€‘å°è¯•ä»CharacterStorageServiceåŠ è½½è§’è‰²
 LOG  ã€CircleSchedulerã€‘ä»CharacterStorageServiceåŠ è½½äº†1ä¸ªè§’è‰²
 LOG  ã€CircleSchedulerã€‘ä»è§’è‰²ä¸­åŠ è½½äº†0ä¸ªå‘å¸ƒæ—¶é—´è®¾ç½®
 LOG  ã€CircleSchedulerã€‘ä»CharacterStorageServiceåŠ è½½äº†1ä¸ªè§’è‰²
 LOG  ã€CircleSchedulerã€‘ä»è§’è‰²ä¸­åŠ è½½äº†0ä¸ªå‘å¸ƒæ—¶é—´è®¾ç½®
 LOG  [NodeSTCore] Successfully loaded data for key: nodest_1758791534476_role
 LOG  [NodeSTCore] Successfully loaded data for key: nodest_1758791534476_world        
 LOG  [NodeSTCore] Successfully loaded data for key: nodest_1758791534476_preset       
 LOG  [NodeSTCore] Successfully loaded data for key: nodest_1758791534476_note
 LOG  [NodeSTCore] Successfully loaded data for key: nodest_1758791534476_history      
 LOG  [NodeSTCore] Successfully loaded data for key: nodest_1758791534476_contents     
 LOG  [CharacterCache] Cached data for 1758791534476
 LOG  [NodeSTCore] Character data loaded from cache: {"hasChatHistory": true, "hasRoleCard": true, "hasWorldBook": true, "historyLength": 1}
 LOG  [å…¨å±€æ­£åˆ™][ç­›é€‰å‰] æ‰€æœ‰è„šæœ¬ç»„: [] å½“å‰è§’è‰²ID: 1758791534476
Android Bundled 280ms node_modules\@react-native-async-storage\async-storage\src\index.ts (592 modules)
 LOG  [å…¨å±€æ­£åˆ™] æœªå¯ç”¨
Android Bundled 518ms app\pages\MemoOverlay.tsx (1075 modules)
 LOG  [NodeSTCore] å‘é‡è®°å¿†åŠŸèƒ½çŠ¶æ€: true
Android Bundled 422ms src\memory\services\Mem0Service.ts (837 modules)
 LOG  [Mem0Service] å¼€å§‹æœç´¢è®°å¿†: "ä½ å¥½"
 LOG  [Mem0Service] æœç´¢å‚æ•°: characterId=1758791534476, conversationId=conversation-1758791534476, limit=5
 LOG  [MobileMemory] å¼€å§‹æœç´¢è®°å¿†: "ä½ å¥½"
 LOG  [MobileMemory] æœç´¢è¿‡æ»¤æ¡ä»¶: {"userId":"current-user","agentId":"1758791534476","runId":"conversation-1758791534476"}, é™åˆ¶: 5æ¡
 LOG  [MobileMemory] ä½¿ç”¨ä¸»åµŒå…¥å™¨è¿›è¡Œå‘é‡åŒ–...
 WARN  [MobileMemory] ä¸»åµŒå…¥å™¨å¤±è´¥ï¼Œå°è¯•ä½¿ç”¨å¤‡ç”¨åµŒå…¥å™¨: [Error: [ZhipuEmbedder] æ™ºè°±åµŒ 
å…¥APIå¯†é’¥æœªè®¾ç½®]
 LOG  [MobileMemory] ä½¿ç”¨å¤‡ç”¨åµŒå…¥å™¨ (CradleCloud) è¿›è¡Œå‘é‡åŒ–...
 LOG  [CradleCloudEmbedder] å°è¯•ä»DiscordæœåŠ¡è·å–JWT Token
 ERROR  [CradleCloudEmbedder] è·å–è®¤è¯å¤´å¤±è´¥: [Error: JWT token not available]
 ERROR  [MobileMemory] å¤‡ç”¨åµŒå…¥å™¨ä¹Ÿå¤±è´¥äº†: [Error: [CradleCloudEmbedder] æ— æ³•è·å–è®¤è¯ä¿¡
æ¯ï¼Œè¯·é…ç½®JWT Tokenæˆ–ç™»å½•Discord]
 ERROR  [Mem0Service] æœç´¢è®°å¿†å¤±è´¥: æ‰€æœ‰åµŒå…¥å™¨éƒ½å¤±è´¥äº† - ä¸»åµŒå…¥å™¨: [ZhipuEmbedder] æ™ºè°±
åµŒå…¥APIå¯†é’¥æœªè®¾ç½®, å¤‡ç”¨åµŒå…¥å™¨: [CradleCloudEmbedder] æ— æ³•è·å–è®¤è¯ä¿¡æ¯ï¼Œè¯·é…ç½®JWT Token 
æˆ–ç™»å½•Discord
 WARN  [Mem0Service] åµŒå…¥æœåŠ¡ä¸å¯ç”¨ï¼Œé‡æ–°æ£€æŸ¥å¯ç”¨æ€§
 LOG  [NodeSTCore] è®°å¿†æœç´¢å®Œæˆ: {"resultsCount": 0, "success": true}
 LOG  [NodeSTCore] Checking if chat history needs summarization...
 LOG  [NodeSTCore] Processing chat... {"characterId_passed_to_processChat": "1758791534476"}
 LOG  [NodeSTCore] Starting processChat with: {"apiProvider": "openai-compatible", "characterId": "1758791534476", "chatHistoryMessagesCount": 2, "dEntriesCount": 1, "hasCustomUserName": false, "hasRewriteOpinion": false, "userMessage": "ä½ å¥½", "userMessageFull": "ä½ å¥½"}
 LOG  [Mem0Service] memoryRef æä¾› isEmbeddingAvailable æ–¹æ³•ï¼Œä½†ä¸ºé¿å…è‡ªåŠ¨ç½‘ç»œæ¢æµ‹ï¼Œå·² 
è·³è¿‡è°ƒç”¨
 LOG  [Mem0Service] åµŒå…¥æœåŠ¡å¯ç”¨æ€§ï¼ˆåŸºäºæœ¬åœ°æ£€æŸ¥ï¼‰: false
 LOG  [NodeSTCore] Successfully loaded data for key: nodest_1758791534476_preset
 LOG  [NodeSTCore] Successfully loaded data for key: nodest_1758791534476_world
 LOG  [NodeSTCore] Successfully loaded data for key: nodest_1758791534476_contents
 LOG  [NodeSTCore] Starting optimized D-entries insertion: {"baseMessage": "ä½ å¥½", "chatHistoryMessages": 2, "dEntriesCount": 1, "processingWindow": 20}
 LOG  [NodeSTCore] Removed 0 old D-entries
 LOG  [NodeSTCore] Chat history is short, processing all messages
 LOG  [NodeSTCore] Filtered D-entries: 1 valid out of 1 total (based on recent 2 messages)
 LOG  [NodeSTCore] Added missing author note: Author Note
 LOG  [NodeSTCore] Optimized D-entry insertion completed: {"archivedCount": 0, "dEntriesInserted": 1, "finalTotalCount": 3, "performanceGain": "No optimization needed", "processedRecentCount": 3}
 LOG  [NodeSTCore] Starting cleanContentsForGemini: {"totalContents": 11}
 LOG  [NodeSTCore] Final cleaned contents: {"filteredCount": 2, "originalCount": 12}   
 LOG  [NodeSTCore] Final Gemini request structure: {"messageSequence": [{"depth": undefined, "preview": "Hello!", "role": "model", "type": "chat"}, {"depth": undefined, "preview": "ä½ å¥½", "role": "user", "type": "chat"}], "totalMessages": 2}
 LOG  [NodeSTCore] å¼€å§‹å¯¹ 2 æ¡æ¶ˆæ¯è¿›è¡Œå‰§æœ¬å®æ›¿æ¢ (characterId: 1758791534476, scriptId: 1758791534476)
 LOG  ğŸ“‹ å‰§æœ¬ 1758791534476 ä½¿ç”¨é»˜è®¤å˜é‡ç³»ç»Ÿé…ç½®
 LOG  âœ… å‰§æœ¬ 1758791534476 çš„ç³»ç»Ÿå®å·²è‡ªåŠ¨æ³¨å†Œ:
 LOG     - ${scriptSummary}: å‰§æœ¬æ‘˜è¦
 LOG     - ${privateSummary}: ç§èŠæ‘˜è¦
 LOG     - ${guidanceCurrentChat}: å½“å‰èŠå¤©æŒ‡å¯¼
 LOG     - ${guidanceCurrentScript}: å½“å‰å‰§æœ¬æŒ‡å¯¼
 LOG     - ${scriptHistoryRecent}: æœ€è¿‘å‰§æœ¬å†å²
 LOG     - ${characterChatRecent}: æœ€è¿‘è§’è‰²èŠå¤©å†å²
 LOG  [NodeSTCore] å®æ›¿æ¢å®Œæˆ: 0 ä¸ªéƒ¨åˆ†å·²æ›¿æ¢, 0 ä¸ªé”™è¯¯
 LOG  [NodeSTCore] Using adapter: {"apiProvider": "openai-compatible", "type": "OpenAICompatible"}
 LOG  [TableMemory] getCharacterTablesData - è·å–è§’è‰² ID: "1758791534476" çš„è¡¨æ ¼æ•°æ®   
 LOG  [TableMemory] æ‰¾åˆ° 0 ä¸ªè¡¨æ ¼æ•°æ®
 LOG  [OpenAIAdapter] å‘é€chatCompletionè¯·æ±‚ FULL: {
  "url": "https://buddy.cradleintro.top/v1/chat/completions",
  "headers": {
    "Content-Type": "application/json",
    "Authorization": "Bearer ***"
  },
  "data": {
    "model": "gemini-2.5-flash",
    "messages": [
      {
        "role": "assistant",
        "content": "Hello!"
      },
      {
        "role": "user",
        "content": "ä½ å¥½"
      }
    ],
    "temperature": 0.7,
    "max_tokens": 32000,
    "stream": false
  }
}
 LOG  [OpenAIAdapter] å‘é€chatCompletionè¯·æ±‚: {"data": {"max_tokens": 32000, "messages": [[Object], [Object]], "model": "gemini-2.5-flash", "stream": false, "temperature": 0.7}, "headers": {"Authorization": "Bearer ***", "Content-Type": "application/json"}, "url": "https://buddy.cradleintro.top/v1/chat/completions"}
 LOG  [OpenAIAdapter] æ”¶åˆ°å“åº”: {"choices": [{"finish_reason": "stop", "index": 0, "message": [Object]}], "created": 1758791743, "id": "97d45f62-bd4a-4999-a954-6bb458c642fb", "model": "gemini-2.5-flash", "object": "chat.completion"}
 LOG  [NodeSTCore] Saving updated history and framework...
 LOG  [NodeSTCore] Updating chat history with new messages and D-entries
 LOG  [NodeSTCore] Removed 0 old D-entries from history
 LOG  [NodeSTCore] Added new AI response to history
 LOG  [NodeSTCore] Starting optimized D-entries insertion: {"baseMessage": "ä½ å¥½", "chatHistoryMessages": 3, "dEntriesCount": 1, "processingWindow": 20}
 LOG  [NodeSTCore] Removed 0 old D-entries
 LOG  [NodeSTCore] Chat history is short, processing all messages
 LOG  [NodeSTCore] Filtered D-entries: 1 valid out of 1 total (based on recent 3 messages)
 LOG  [NodeSTCore] Added missing author note: Author Note
 LOG  [NodeSTCore] Optimized D-entry insertion completed: {"archivedCount": 0, "dEntriesInserted": 1, "finalTotalCount": 4, "performanceGain": "No optimization needed", "processedRecentCount": 4}
 LOG  [NodeSTCore] Updated chat history summary: {"cleanHistoryCount": 3, "dEntriesCount": 1, "finalMessagesCount": 4, "hasAiResponse": true, "hasUserMessage": true, "originalMessagesCount": 2}
 LOG  [NodeSTCore] Successfully saved data for key: nodest_1758791534476_history
 LOG  [NodeSTCore] Content framework and history saved successfully
 LOG  ğŸ“š [å˜é‡ç³»ç»Ÿ] å¼€å§‹æ£€æŸ¥è§’è‰²çš„å‰§æœ¬å˜é‡ç»‘å®š...
 LOG  ğŸ“š [å˜é‡ç³»ç»Ÿ] Loaded character from CharacterStorageService: 1758791534476       
 LOG  ğŸ“š [å˜é‡ç³»ç»Ÿ] è§’è‰²æœªç»‘å®šå‰§æœ¬ï¼Œè·³è¿‡å˜é‡å¤„ç†
 LOG  [NodeSTCore] Updating chat history with new messages and D-entries
 LOG  [NodeSTCore] Removed 0 old D-entries from history
 LOG  [NodeSTCore] Added new AI response to history
 LOG  [NodeSTCore] Starting optimized D-entries insertion: {"baseMessage": "ä½ å¥½", "chatHistoryMessages": 3, "dEntriesCount": 1, "processingWindow": 20}
 LOG  [NodeSTCore] Removed 0 old D-entries
 LOG  [NodeSTCore] Chat history is short, processing all messages
 LOG  [NodeSTCore] Filtered D-entries: 1 valid out of 1 total (based on recent 3 messages)
 LOG  [NodeSTCore] Added missing author note: Author Note
 LOG  [NodeSTCore] Optimized D-entry insertion completed: {"archivedCount": 0, "dEntriesInserted": 1, "finalTotalCount": 4, "performanceGain": "No optimization needed", "processedRecentCount": 4}
 LOG  [NodeSTCore] Updated chat history summary: {"cleanHistoryCount": 3, "dEntriesCount": 1, "finalMessagesCount": 4, "hasAiResponse": true, "hasUserMessage": true, "originalMessagesCount": 2}
 LOG  [CharacterCache] Updated chatHistory for 1758791534476
 LOG  [NodeSTCore] Transactional save successful for 1 files
 LOG  [NodeSTCore] Cache and files updated successfully for 1758791534476
 LOG  [NodeSTCore] Chat history saved with atomic writes: {"lastMessage": "ä½ å¥½ï¼å¾ˆé«˜å…´
è§åˆ°ä½ ã€‚...", "totalMessages": 4}
 LOG  [useChatActions] NodeSTå¤„ç†æˆåŠŸï¼Œå®ŒæˆAIå›å¤
 LOG  [StorageAdapter] Retrieving clean chat history for conversation: 1758791534476   
 LOG  [ChatDialog] Current dialog mode: normal paragraphModeEnabled: false
 LOG  [ChatDialog] Message 1758791743876 rendered at 17:15:44
 LOG  ã€CircleSchedulerã€‘å°è¯•ä»CharacterStorageServiceåŠ è½½è§’è‰²
 LOG  ã€CircleSchedulerã€‘ä»CharacterStorageServiceåŠ è½½äº†1ä¸ªè§’è‰²
 LOG  ã€CircleSchedulerã€‘ä»è§’è‰²ä¸­åŠ è½½äº†0ä¸ªå‘å¸ƒæ—¶é—´è®¾ç½®
 LOG  [StorageAdapter] Retrieved 3 clean messages
 LOG  [TableMemory] getCharacterTablesData - è·å–è§’è‰² ID: "1758791534476" çš„è¡¨æ ¼æ•°æ®   
 LOG  [TableMemory] ä¼šè¯è¿‡æ»¤ ID: "1758791534476"
 LOG  [TableMemory] æ‰¾åˆ° 0 ä¸ªè¡¨æ ¼æ•°æ®
 LOG  [TableMemoryService] [0] ====== è¡¨æ ¼è®°å¿†å…¨æµç¨‹å¼€å§‹ ====== {"characterId": "1758791534476", "conversationId": "1758791534476", "messages": [{"content": "Hello!", "role": "assistant"}, {"content": "ä½ å¥½", "role": "user"}, {"content": "ä½ å¥½ï¼å¾ˆé«˜å…´è§åˆ°ä½ ã€‚", "role": "assistant"}], "tableNameToId": {}}
 LOG  [TableMemoryService] [1] å¼€å§‹è·å–èŠå¤©å†…å®¹ï¼Œå‚æ•°: {"characterId": "1758791534476", "conversationId": "1758791534476", "messages": [{"content": "Hello!", "role": "assistant"}, {"content": "ä½ å¥½", "role": "user"}, {"content": "ä½ å¥½ï¼å¾ˆé«˜å…´è§åˆ°ä½ ã€‚", "role": 
"assistant"}], "tableNameToId": {}}
 LOG  [TableMemoryService] [1.3] messagesä¸ºæ•°ç»„ï¼Œæ‹¼æ¥åå†…å®¹:
AI: Hello!

ç”¨æˆ·: ä½ å¥½

AI: ä½ å¥½ï¼å¾ˆé«˜å…´è§åˆ°ä½ ã€‚
 LOG  [TableMemoryService] [2] è·å–è¡¨æ ¼æ•°æ®ï¼ŒcharacterId=1758791534476, conversationId=1758791534476
 LOG  [TableMemory] getCharacterTablesData - è·å–è§’è‰² ID: "1758791534476" çš„è¡¨æ ¼æ•°æ®   
 LOG  [TableMemory] ä¼šè¯è¿‡æ»¤ ID: "1758791534476"
 LOG  [TableMemory] æ‰¾åˆ° 0 ä¸ªè¡¨æ ¼æ•°æ®
 LOG  [TableMemoryService] [2.1] è¡¨æ ¼æ•°æ®è·å–å®Œæˆ: {"success": true, "tables": []}     
 LOG  [TableMemoryService] [3] æ„å»ºè¡¨æ ¼ä¸“ç”¨æç¤ºè¯
 LOG  [TableMemoryService] [3.1] systemPrompt:
ä½ æ˜¯ä¸“ä¸šçš„è¡¨æ ¼è®°å¿†åŠ©æ‰‹ï¼Œåªè´Ÿè´£ç»“æ„åŒ–è¡¨æ ¼ä¿¡æ¯çš„æå–ä¸ç»´æŠ¤ã€‚è¯·ä¸¥æ ¼æŒ‰ç…§è¡¨æ ¼ç»“æ„å’Œè§„åˆ™å¤„ç† 
ã€‚
 LOG  [TableMemoryService] [3.2] userPrompt:

å½“å‰è¡¨æ ¼æ•°æ®:


å¯¹è¯å†…å®¹:
AI: Hello!

ç”¨æˆ·: ä½ å¥½

AI: ä½ å¥½ï¼å¾ˆé«˜å…´è§åˆ°ä½ ã€‚

è¯·åˆ†æå¯¹è¯å†…å®¹ï¼Œç”Ÿæˆè¡¨æ ¼æ“ä½œæŒ‡ä»¤ï¼ˆJSONæ ¼å¼ï¼‰ï¼Œä¸¥æ ¼æŒ‰ç…§å¦‚ä¸‹å‚æ•°è§„èŒƒè¾“å‡ºï¼š

- action: æ“ä½œç±»å‹ï¼Œæ”¯æŒ "insert"ï¼ˆæ’å…¥è¡Œï¼‰ã€"update"ï¼ˆæ›´æ–°è¡Œï¼‰ã€"delete"ï¼ˆåˆ é™¤è¡Œï¼‰    
- sheetId: ç›®æ ‡è¡¨æ ¼çš„åç§°ï¼ˆå¦‚: "é‡è¦ç‰©å“è¡¨æ ¼"ï¼‰ï¼Œç³»ç»Ÿä¼šè‡ªåŠ¨è½¬æ¢ä¸ºè¡¨æ ¼ID
- rowIndex: è¡Œç´¢å¼•ï¼ˆä»1å¼€å§‹ï¼Œä»…update/deleteéœ€è¦ï¼‰
- rowData: è¡Œæ•°æ®å¯¹è±¡ï¼Œé”®ä¸ºåˆ—ç´¢å¼•ï¼ˆå¦‚ "0", "1", ...ï¼‰ï¼Œå€¼ä¸ºå•å…ƒæ ¼å†…å®¹ï¼ˆä»…insert/update 
éœ€è¦ï¼‰
- colIndex/newValue: å¦‚åªéœ€æ›´æ–°å•å…ƒæ ¼ï¼Œå¯ç”¨ colIndex æŒ‡å®šåˆ—ç´¢å¼•ï¼ŒnewValue æŒ‡å®šæ–°å€¼ï¼ˆå¯ 
é€‰ï¼‰

å¦å¤–æ³¨æ„ï¼Œä¸ç”¨ä¿®æ”¹ç¬¬0è¡Œï¼Œå› ä¸ºç¬¬0è¡Œæ˜¯æ ‡é¢˜è¡Œã€‚

ç¤ºä¾‹:
{
  "tableActions": [
    {
      "action": "insert",
      "sheetId": "é‡è¦ç‰©å“è¡¨æ ¼",
      "rowData": { "0": "ç”¨æˆ·", "1": "é‡è¦çš„åŒ…è£¹", "2": "é•œå­", "3": "åŸå› " }
    },
    {
      "action": "update",
      "sheetId": "é‡è¦ç‰©å“è¡¨æ ¼",
      "rowIndex": 1,
      "rowData": { "2": "é•œå­" }
    },
    {
      "action": "update",
      "sheetId": "é‡è¦ç‰©å“è¡¨æ ¼",
      "rowIndex": 1,
      "colIndex": 2,
      "newValue": "é•œå­"
    },
    {
      "action": "delete",
      "sheetId": "é‡è¦ç‰©å“è¡¨æ ¼",
      "rowIndex": 1
    }
  ]
}

è¯·åªè¿”å›JSONå¯¹è±¡ï¼Œä¸”æ¯ä¸ªtableActionå¿…é¡»åŒ…å« action å’Œ sheetIdï¼Œå…¶ä»–å‚æ•°æŒ‰éœ€å¡«å†™ï¼ŒrowData å¿…é¡»ä¸ºå¯¹è±¡ä¸”é”®ä¸ºåˆ—ç´¢å¼•ï¼Œå€¼ä¸ºå­—ç¬¦ä¸²ã€‚
 LOG  [TableMemoryService] [4] è°ƒç”¨LLMç”Ÿæˆè¡¨æ ¼æ“ä½œæŒ‡ä»¤...
 LOG  [TableMemory] ä»Mem0Serviceè·å–LLMå®ä¾‹
 LOG  [MobileLLM] ä»å­˜å‚¨ä¸­è·å–åˆ°APIå¯†é’¥
 LOG  [MobileLLM] é€‚é…å™¨æœªåˆå§‹åŒ–ï¼Œæ­£åœ¨åˆå§‹åŒ–...
 LOG  [MobileLLM] å¼€å§‹åˆå§‹åŒ–openai-compatibleé€‚é…å™¨ï¼Œå¯†é’¥é•¿åº¦: 27
 LOG  [OpenAIAdapter] åˆå§‹åŒ–ï¼Œendpoint: https://buddy.cradleintro.top/v1/chat/completions, model: gemini-2.5-flash
 LOG  [MobileLLM] OpenAIAdapter åˆå§‹åŒ–æˆåŠŸ
 LOG  [MobileLLM] å¼€å§‹ç”Ÿæˆå†…å®¹ï¼Œæä¾›å•†: openai-compatibleï¼Œæ¨¡å‹: gemini-2.5-flashï¼Œæ¶ˆæ¯
æ•°: 2
 LOG  [OpenAIAdapter][è¡¨æ ¼è®°å¿†] æœªæä¾›æœ‰æ•ˆçš„characterId/agentIdï¼Œè·³è¿‡è¡¨æ ¼è®°å¿†æ³¨å…¥      
 LOG  [OpenAIAdapter] å‘é€è¯·æ±‚åˆ°APIï¼Œå…± 2 æ¡æ¶ˆæ¯
 LOG  [OpenAIAdapter] å‘é€chatCompletionè¯·æ±‚ FULL: {
  "url": "https://buddy.cradleintro.top/v1/chat/completions",
  "headers": {
    "Content-Type": "application/json",
    "Authorization": "Bearer ***"
  },
  "data": {
    "model": "gemini-2.5-flash",
    "messages": [
      {
        "role": "user",
        "content": "ä½ æ˜¯ä¸“ä¸šçš„è¡¨æ ¼è®°å¿†åŠ©æ‰‹ï¼Œåªè´Ÿè´£ç»“æ„åŒ–è¡¨æ ¼ä¿¡æ¯çš„æå–ä¸ç»´æŠ¤ã€‚è¯·ä¸¥æ ¼æŒ‰ 
ç…§è¡¨æ ¼ç»“æ„å’Œè§„åˆ™å¤„ç†ã€‚"
      },
      {
        "role": "user",
        "content": "\nå½“å‰è¡¨æ ¼æ•°æ®:\n\n\nå¯¹è¯å†…å®¹:\nAI: Hello!\n\nç”¨æˆ·: ä½ å¥½\n\nAI: ä½  
å¥½ï¼å¾ˆé«˜å…´è§åˆ°ä½ ã€‚\n\nè¯·åˆ†æå¯¹è¯å†…å®¹ï¼Œç”Ÿæˆè¡¨æ ¼æ“ä½œæŒ‡ä»¤ï¼ˆJSONæ ¼å¼ï¼‰ï¼Œä¸¥æ ¼æŒ‰ç…§å¦‚ä¸‹å‚æ•°è§„ 
èŒƒè¾“å‡ºï¼š\n\n- action: æ“ä½œç±»å‹ï¼Œæ”¯æŒ \"insert\"ï¼ˆæ’å…¥è¡Œï¼‰ã€\"update\"ï¼ˆæ›´æ–°è¡Œï¼‰ã€\"delete\"ï¼ˆåˆ é™¤è¡Œï¼‰\n- sheetId: ç›®æ ‡è¡¨æ ¼çš„åç§°ï¼ˆå¦‚: \"é‡è¦ç‰©å“è¡¨æ ¼\"ï¼‰ï¼Œç³»ç»Ÿä¼šè‡ªåŠ¨è½¬æ¢ä¸ºè¡¨æ ¼
ID\n- rowIndex: è¡Œç´¢å¼•ï¼ˆä»1å¼€å§‹ï¼Œä»…update/deleteéœ€è¦ï¼‰\n- rowData: è¡Œæ•°æ®å¯¹è±¡ï¼Œé”®ä¸ºåˆ—ç´¢
å¼•ï¼ˆå¦‚ \"0\", \"1\", ...ï¼‰ï¼Œå€¼ä¸ºå•å…ƒæ ¼å†…å®¹ï¼ˆä»…insert/updateéœ€è¦ï¼‰\n- colIndex/newValue: å¦‚åªéœ€æ›´æ–°å•å…ƒæ ¼ï¼Œå¯ç”¨ colIndex æŒ‡å®šåˆ—ç´¢å¼•ï¼ŒnewValue æŒ‡å®šæ–°å€¼ï¼ˆå¯é€‰ï¼‰\n\nå¦å¤–æ³¨æ„ï¼Œä¸ 
ç”¨ä¿®æ”¹ç¬¬0è¡Œï¼Œå› ä¸ºç¬¬0è¡Œæ˜¯æ ‡é¢˜è¡Œã€‚\n\nç¤ºä¾‹:\n{\n  \"tableActions\": [\n    {\n      \"action\": \"insert\",\n      \"sheetId\": \"é‡è¦ç‰©å“è¡¨æ ¼\",\n      \"rowData\": { \"0\": \"ç”¨æˆ·\", \"1\": \"é‡è¦çš„åŒ…è£¹\", \"2\": \"é•œå­\", \"3\": \"åŸå› \" }\n    },\n    {\n    
  \"action\": \"update\",\n      \"sheetId\": \"é‡è¦ç‰©å“è¡¨æ ¼\",\n      \"rowIndex\": 1,\n      \"rowData\": { \"2\": \"é•œå­\" }\n    },\n    {\n      \"action\": \"update\",\n      \"sheetId\": \"é‡è¦ç‰©å“è¡¨æ ¼\",\n      \"rowIndex\": 1,\n      \"colIndex\": 2,\n      \"newValue\": \"é•œå­\"\n    },\n    {\n      \"action\": \"delete\",\n      \"sheetId\": \"é‡è¦ç‰©å“è¡¨æ ¼\",\n      \"rowIndex\": 1\n    }\n  ]\n}\n\nè¯·åªè¿”å›JSONå¯¹è±¡ï¼Œä¸”
æ¯ä¸ªtableActionå¿…é¡»åŒ…å« action å’Œ sheetIdï¼Œå…¶ä»–å‚æ•°æŒ‰éœ€å¡«å†™ï¼ŒrowData å¿…é¡»ä¸ºå¯¹è±¡ä¸”é”®ä¸ºåˆ—
ç´¢å¼•ï¼Œå€¼ä¸ºå­—ç¬¦ä¸²ã€‚\n\nè¯·ä»¥æœ‰æ•ˆçš„JSONæ ¼å¼å“åº”ã€‚"
      }
    ],
    "temperature": 0.7,
    "max_tokens": 32000,
    "stream": false
  }
}
 LOG  [OpenAIAdapter] å‘é€chatCompletionè¯·æ±‚: {"data": {"max_tokens": 32000, "messages": [[Object], [Object]], "model": "gemini-2.5-flash", "stream": false, "temperature": 0.7}, "headers": {"Authorization": "Bearer ***", "Content-Type": "application/json"}, "url": "https://buddy.cradleintro.top/v1/chat/completions"}
 LOG  [ChatDialog] Current dialog mode: normal paragraphModeEnabled: false
 LOG  [TableMemoryIntegration] åˆå§‹åŒ–è¡¨æ ¼è®°å¿†æ’ä»¶...
 LOG  ã€CircleSchedulerã€‘å°è¯•ä»CharacterStorageServiceåŠ è½½è§’è‰²
 LOG  [TableMemory] æ’ä»¶å·²åˆå§‹åŒ–ï¼Œè·³è¿‡
 LOG  [TableMemory] æ’ä»¶å·²å¯ç”¨
 LOG  [TableMemoryIntegration] è¡¨æ ¼è®°å¿†æ’ä»¶åˆå§‹åŒ–æˆåŠŸ
 LOG  [MemoOverlay] Table memory plugin initialized successfully
 LOG  [TableMemory] è·å–æ‰€æœ‰æ¨¡æ¿
 LOG  ã€CircleSchedulerã€‘ä»CharacterStorageServiceåŠ è½½äº†1ä¸ªè§’è‰²
 LOG  ã€CircleSchedulerã€‘ä»è§’è‰²ä¸­åŠ è½½äº†0ä¸ªå‘å¸ƒæ—¶é—´è®¾ç½®
 LOG  [TableMemory] è·å–æ‰€æœ‰æ¨¡æ¿ï¼Œå…± 6 ä¸ªæ¨¡æ¿
 LOG  [MemoOverlay] Loaded 6 total templates
 LOG  [TableMemory] è·å–æ‰€æœ‰æ¨¡æ¿
 LOG  [Mem0Service] è®°å¿†ç³»ç»Ÿ å·²å¯ç”¨
 LOG  [MemoOverlay] Memory recording enabled
 LOG  [TableMemory] è·å–æ‰€æœ‰æ¨¡æ¿ï¼Œå…± 6 ä¸ªæ¨¡æ¿
 LOG  [MemoOverlay] Loaded 6 total templates
 LOG  [MemoOverlay] Loaded 6 selected template IDs
 LOG  [TableMemory] getCharacterTablesData - è·å–è§’è‰² ID: "1758791534476" çš„è¡¨æ ¼æ•°æ®
 LOG  [TableMemory] ä¼šè¯è¿‡æ»¤ ID: "1758791534476"
 LOG  [TableMemory] æ‰¾åˆ° 0 ä¸ªè¡¨æ ¼æ•°æ®
 LOG  [MemoOverlay] Loaded 6 selected template IDs
 LOG  [TableMemory] getCharacterTablesData - è·å–è§’è‰² ID: "1758791534476" çš„è¡¨æ ¼æ•°æ®   
 LOG  [TableMemory] ä¼šè¯è¿‡æ»¤ ID: "1758791534476"
 LOG  [TableMemory] æ‰¾åˆ° 0 ä¸ªè¡¨æ ¼æ•°æ®
 LOG  [OpenAIAdapter] æ”¶åˆ°å“åº”: {"choices": [{"finish_reason": "stop", "index": 0, "message": [Object]}], "created": 1758791747, "id": "aafa9905-aeec-4a45-a145-2e74070a8b98", "model": "gemini-2.5-flash", "object": "chat.completion"}
 LOG  [OpenAIAdapter] APIè°ƒç”¨å®Œæˆï¼Œè€—æ—¶: 3833ms
 LOG  [OpenAIAdapter] æˆåŠŸæ¥æ”¶å“åº”ï¼Œé•¿åº¦: 36
 LOG  [OpenAIAdapter] å“åº”å‰100ä¸ªå­—ç¬¦: ```json
{
  "tableActions": []
}
```...
 LOG  [MobileLLM] æˆåŠŸç”Ÿæˆå†…å®¹ï¼Œå“åº”é•¿åº¦: 36
 LOG  [TableMemoryService] [4.2] LLMå“åº”å†…å®¹:
```json
{
  "tableActions": []
}
```
 LOG  [TableMemoryService] [5] è§£æLLMå“åº”ï¼Œæå–è¡¨æ ¼æ“ä½œæŒ‡ä»¤...
 LOG  [TableMemoryService] [5.1] æˆåŠŸè§£æåˆ°tableActions: []
 LOG  [TableMemoryService] [6] å¼€å§‹æ‰§è¡Œè¡¨æ ¼æ“ä½œï¼Œå…±0æ¡
 LOG  [TableMemoryService] [6.1] æ— éœ€æ‰§è¡Œè¡¨æ ¼æ“ä½œï¼Œç›´æ¥è¿”å›
 LOG  [TableMemoryService] [9] ====== è¡¨æ ¼è®°å¿†å…¨æµç¨‹ç»“æŸï¼Œæœ€ç»ˆæ›´æ–°è¡¨æ ¼ID: []
 LOG  [useChatActions] è¡¨æ ¼è®°å¿†æœåŠ¡å·²å¼‚æ­¥å¤„ç†å®Œæˆ
 LOG  [StorageAdapter] Retrieving clean chat history for conversation: 1758791534476
 LOG  [StorageAdapter] Retrieved 3 clean messages
 LOG  [MemoOverlay] Loaded 0 summaries for conversation 1758791534476
 LOG  [MemoOverlay] summarizeMemoryNow è¯·æ±‚å‚æ•°: {"characterId": "1758791534476", "conversationId": "1758791534476"}
 LOG  [StorageAdapter] Retrieving clean chat history for conversation: 1758791534476
 LOG  [StorageAdapter] Retrieved 3 clean messages
 LOG  [MemoryService] generateSummary called with forceGenerate=true
 LOG  [StorageAdapter] Retrieving clean chat history for conversation: 1758791534476   
 LOG  [StorageAdapter] Retrieved 3 clean messages
 LOG  [MemoryService] Chat history total length: 18 characters
 LOG  [MemoryService] finalSummaryRangePercent: {"end": 60, "start": 40}
 LOG  [MemoryService] Using percentage summary range: [40%, 60%]
 LOG  [MemoryService] Calculated indices from percentages: startIdx=1, endIdx=2 (total 
messages: 3)
 LOG  [MemoryService] Requesting summary from unified API for 1 messages with custom settings
 LOG  [OpenAIAdapter] åˆå§‹åŒ–ï¼Œendpoint: https://buddy.cradleintro.top/v1/chat/completions, model: gemini-2.5-flash
 LOG  [OpenAIAdapter][è¡¨æ ¼è®°å¿†] characterIdå‚æ•°å€¼: 1758791534476 string
 LOG  [OpenAIAdapter][è¡¨æ ¼è®°å¿†] è°ƒç”¨ getCharacterTablesData å‰å‚æ•°: {"characterId": "1758791534476"}
 LOG  [TableMemory] getCharacterTablesData - è·å–è§’è‰² ID: "1758791534476" çš„è¡¨æ ¼æ•°æ®   
 LOG  [TableMemory] æ‰¾åˆ° 0 ä¸ªè¡¨æ ¼æ•°æ®
 LOG  [OpenAIAdapter][è¡¨æ ¼è®°å¿†] getCharacterTablesData è¿”å›: {"success": true, "tables": []}
 LOG  [OpenAIAdapter][è¡¨æ ¼è®°å¿†] æœªè·å–åˆ°æœ‰æ•ˆè¡¨æ ¼æ•°æ®ï¼Œsuccess: true tables.length: 0   
 LOG  [OpenAIAdapter] å‘é€è¯·æ±‚åˆ°APIï¼Œå…± 2 æ¡æ¶ˆæ¯
 LOG  [OpenAIAdapter] å‘é€chatCompletionè¯·æ±‚ FULL: {
  "url": "https://buddy.cradleintro.top/v1/chat/completions",
  "headers": {
    "Content-Type": "application/json",
    "Authorization": "Bearer ***"
  },
  "data": {
    "model": "gemini-2.5-flash",
    "messages": [
      {
        "role": "system",
        "content": "ä½ æ˜¯å¯¹è¯æ€»ç»“åŠ©æ‰‹ï¼Œè¯·è¾“å‡ºç®€æ´ã€ç»“æ„åŒ–çš„ä¸­æ–‡æ‘˜è¦ï¼Œä¿ç•™äººç‰©å…³ç³»ã€æ„å›¾ 
ã€è®¡åˆ’ã€å·²è¾¾æˆäº‹é¡¹ä¸æœªè§£å†³é—®é¢˜ï¼Œä¸è¦ç‚¹è¯„ã€‚"
      },
      {
        "role": "user",
        "content": "å¾…æ€»ç»“çš„å‰§æœ¬å†…å®¹ï¼š\n=== ç¬¬ 1 è½® ===\nç”¨æˆ·è¾“å…¥: \nå‰§æƒ…å‘å±•: <Format>\r\n<Narrative>\r\nchangeBg:ç™½å¤©-ä¸­æµ·å¤§å­¦æ ¡å›­.bg\r\næ—ç™½:2021å¹´ç§‹ï¼Œä¸­æµ·å¸‚å¤§å­¦ã€‚å¯¹äºæˆ‘ï¼Œ
Playerï¼Œåˆšä»åå…«çº¿å°å¿åŸè€ƒå‡ºæ¥çš„å¥‹æ–—Xæ¥è¯´ï¼Œè¿™é‡Œçš„ä¸€åˆ‡éƒ½é—ªé—ªå‘å…‰â€”â€”é™¤äº†æˆ‘æ€€é‡Œè¿™æ‘èƒ½æŠŠäººå‹
æˆäºŒç»´ç”Ÿç‰©çš„æ–°ç”Ÿæ•™æã€‚ -memory.fx\r\næˆ‘:â€œè¿™ç©æ„å„¿ç»å¯¹æ¯”æˆ‘çš„ä½“é‡è¿˜æ²‰â€¦â€¦å¯æ¶ï¼Œæ—©çŸ¥é“å°±ä¸é€‰
è¿™ä¸ªå·ç§°â€˜çŸ¥è¯†æ”¹å˜å‘½è¿â€™ä½†æ•™æè¦äººå‘½çš„ä¸“ä¸šäº†ã€‚\r\næ—ç™½:æˆ‘ä¸€è¾¹å°å£°ç¢ç¢å¿µï¼Œä¸€è¾¹ä½å¤´çœ‹ç€æ‰‹æœº
ä¸Šçš„æ ¡å›­åœ°å›¾ï¼Œè¯•å›¾åœ¨å¼€å­¦ç¬¬ä¸€å¤©çš„äººæ½®ä¸­ï¼Œå¼ºè¡Œèµ°å‡ºä¸€æ¡å±äºæˆ‘çš„å…­äº²ä¸è®¤çš„æ­¥ä¼ã€‚\r\næ—ç™½:å°±
åœ¨è¿™æ—¶ï¼Œæ‰‹æœºå±å¹•â€œå®â€åœ°äº®èµ·ï¼Œä¸€æ¡ç¤¾å›¢æ‹›æ–°çš„èŠ±å“¨æ¨é€å¼¹äº†å‡ºæ¥ã€‚\r\næˆ‘:â€œâ€˜ä¸­æµ·å¤§å­¦è¶…è‡ªç„¶ç°è±¡
ç ”ç©¶ç¤¾â€™ï¼Ÿç°åœ¨çš„å°å­©çœŸæ˜¯ï¼Œå—¯ï¼Ÿâ€\r\næ—ç™½:å°±è¿™ä¸€ç§’çš„åˆ†ç¥ï¼Œæˆ‘â€œå’šâ€çš„ä¸€å£°ï¼Œç»“ç»“å®å®åœ°æ’ä¸Šäº†ä¸€
å µâ€œå¢™â€ï¼Ÿ -æ’å‡».sfx\r\næ—ç™½:æ€€é‡Œçš„æ•™æä»¬å¦‚åŒä¸€ç¾¤è§†æ­»å¦‚å½’çš„æ•¢æ­»é˜Ÿï¼Œçº·çº·å‘ç€å››é¢å…«æ–¹è‹±å‹‡å°±
ä¹‰ã€‚\r\næ—ç™½:ä¸–ç•Œç¬é—´é™·å…¥äº†å°´å°¬çš„é™æ­¢ã€‚\r\næˆ‘:â€œå•Šï¼å¯¹ã€å¯¹ä¸èµ·ï¼æˆ‘ä¸æ˜¯æ•…æ„çš„ï¼çœŸçš„ï¼â€æˆ‘ 
ä¸€è¾¹ç–¯ç‹‚é èº¬é“æ­‰ï¼Œä¸€è¾¹æ‰‹å¿™è„šä¹±åœ°å‡†å¤‡æ”¶æ‹¾æ®‹å±€ã€‚\r\nchangeFigure:å¸æ¾ˆ-æ­£å¸¸.sprite\r\næ—ç™½
:ç„¶è€Œï¼Œé‚£å µâ€œå¢™â€å¹¶æ²¡æœ‰å‘å‡ºä»»ä½•è´£å¤‡çš„å£°éŸ³ã€‚æˆ‘å°å¿ƒç¿¼ç¿¼åœ°æŠ¬èµ·å¤´ï¼Œç„¶åâ€”â€”å‘¼å¸åœæ»äº†åŠç§’ã€‚\r\næ—ç™½:é˜³å…‰æ­£å·§è½åœ¨ä»–æ·±æ£•è‰²çš„å‘ä¸ä¸Šï¼Œå‹¾å‹’å‡ºæŸ”å’Œçš„è½®å»“ï¼Œè€Œé‚£åŒçœ¼çœ¸é‡Œï¼Œä»¿ä½›å†°é¢ä¸‹å°å†»ç€ä¸‡åƒ
æ˜Ÿè¾°ï¼Œæ­¤åˆ»æ­£å®‰é™åœ°çœ‹ç€æˆ‘ã€‚\r\næ—ç™½:å¥‡æ€ªçš„æ˜¯ï¼Œä»–çš„çœ¼ç¥é‡Œæ²¡æœ‰è¢«æ’åˆ°çš„æ¼æ€’ï¼Œåè€Œåƒæ˜¯é€è¿‡æˆ‘
ï¼Œåœ¨çœ‹ä»€ä¹ˆæ›´é¥è¿œçš„ä¸œè¥¿ï¼Œå¸¦ç€ä¸€ç§è®©äººå¿ƒç–¼çš„ç–²æƒ«ã€‚\r\nå¸æ¾ˆ:â€œâ€¦â€¦â€\r\næˆ‘:â€œé‚£ä¸ªï¼Œå¸…å“¥ï¼Ÿä½ è¿˜å¥½
å—ï¼Ÿâ€\r\næ—ç™½:ä»–ä¼¼ä¹è¿™æ‰å›è¿‡ç¥ï¼Œè§†çº¿ç»ˆäºèšç„¦åœ¨æˆ‘è„¸ä¸Šã€‚\r\nå¸æ¾ˆ:â€œæ²¡å…³ç³»ã€‚â€\r\næ—ç™½:ä»–çš„ 
å£°éŸ³å¾ˆå¥½å¬ï¼Œåƒåˆé›ªè½åœ¨ç´å¼¦ä¸Šï¼Œæ¸…å†·åˆå¹²å‡€ã€‚ä½†ä¸çŸ¥é“æ˜¯ä¸æ˜¯æˆ‘çš„é”™è§‰ï¼Œä»–å¼€å£çš„ç¬é—´ï¼Œå‘¨å›´å–§ 
é—¹çš„äººå£°ã€é£å£°ã€å¶å­æ‘©æ“¦çš„å£°éŸ³å¥½åƒéƒ½å˜å¾—ä¸é‚£ä¹ˆåˆºè€³äº†ã€‚\r\nå¸æ¾ˆ:â€œæ˜¯æˆ‘æŒ¡è·¯äº†ã€‚â€\r\næ—ç™½: 
è¯´ç€ï¼Œä»–å·²ç»è‡ªç„¶åœ°è¹²ä¸‹èº«ï¼Œå¼€å§‹å¸®æˆ‘æ¡æ‹¾é‚£äº›æ•£è½çš„ä¹¦æœ¬ã€‚é‚£åŒéª¨èŠ‚åˆ†æ˜çš„æ‰‹ï¼Œä¿®é•¿åˆç™½çš™ï¼Œç®€ 
ç›´åƒæ˜¯å¼¹é’¢ç´çš„ã€‚\r\næˆ‘:â€œä¸ä¸ä¸ï¼Œæ˜¯æˆ‘çš„é”™ï¼æˆ‘æ¥æˆ‘æ¥ï¼â€æˆ‘èµ¶ç´§ä¹Ÿè¹²ä¸‹å»ï¼Œç”Ÿæ€•å†ç»™ä»–æ·»éº»çƒ¦ã€‚
\r\næ—ç™½:ç„¶åï¼Œç»å…¸çš„é’æ˜¥å‰§æ¡¥æ®µå‘ç”Ÿäº†â€”â€”æˆ‘ä»¬åŒæ—¶ä¼¸å‘äº†åŒä¸€æœ¬ä¹¦ï¼Œã€Šé‡å­ç‰©ç†å¯¼è®ºã€‹ã€‚\r\næ—
ç™½:åœ¨é‚£ä¸ªç¬é—´ï¼Œæˆ‘çš„æŒ‡å°–ï¼Œè½»è½»åœ°ã€ä¸å¯é¿å…åœ°ï¼Œè§¦ç¢°åˆ°äº†ä»–çš„æ‰‹èƒŒã€‚\r\næ—ç™½:æ²¡æœ‰é™ç”µã€‚\r\n 
æ—ç™½:ä½†æ˜¯ï¼Œä¸€ç§æ¯”é™ç”µæ›´å¥‡å¼‚çš„æ„Ÿè§‰ä¼ éå…¨èº«ã€‚ -å¿ƒè·³.sfx\r\næ—ç™½:ä¸–ç•Œï¼Œä»¿ä½›è¢«æŒ‰ä¸‹äº†é™éŸ³é”® 
ã€‚\r\nchangeFigure:å¸æ¾ˆ-æ€ç´¢.sprite\r\næ—ç™½:å¹¶éçœŸçš„æ²¡æœ‰å£°éŸ³äº†ï¼Œè€Œæ˜¯è„‘æµ·é‡Œé‚£å±‚æ°¸è¿œå­˜åœ¨ 
çš„ã€å¦‚åŒç”µè§†é›ªèŠ±ç‚¹èˆ¬çš„èƒŒæ™¯â€œå™ªéŸ³â€ï¼Œç¬¬ä¸€æ¬¡æ¶ˆå¤±äº†ã€‚æ•´ä¸ªä¸–ç•Œå˜å¾—å‰æ‰€æœªæœ‰çš„æ¸…æ¾ˆã€å¹²å‡€ã€‚\r\n 
æ—ç™½:è€Œçœ¼å‰çš„å¸æ¾ˆï¼Œèº«ä½“çŒ›åœ°ä¸€åƒµã€‚ä»–é‚£åŒç¢§è“è‰²çš„çœ¼çœ¸ç¬é—´çå¤§ï¼Œæ­»æ­»åœ°ç›¯ç€æˆ‘ä»¬ç›¸è§¦çš„åœ°æ–¹ï¼Œ
é‚£ä»½æƒŠæ„•è¿œæ¯”æˆ‘è¿™ä¸ªâ€œè‚‡äº‹è€…â€è¦å¼ºçƒˆä¸€ä¸‡å€ã€‚\r\nå¸æ¾ˆ:ä»–çŒ›åœ°ç¼©å›äº†æ‰‹ï¼åŠ¨ä½œå¿«å¾—åƒè¢«ç¼ä¼¤ã€‚\r\næ—-ç™½:ä»–æ²¡æœ‰çœ‹æˆ‘ï¼Œè€Œæ˜¯ç”¨å¦ä¸€åªæ‰‹æŒ‰ä½äº†è‡ªå·±çš„å¤ªé˜³ç©´ï¼Œé—­ä¸Šçœ¼ç›ï¼Œè„¸ä¸Šé‚£ç§æ·±é‡çš„ç–²æƒ«æ„Ÿï¼Œç«Ÿ 
ç„¶è‚‰çœ¼å¯è§åœ°è¤ªå»äº†å‡ åˆ†ï¼Œå–è€Œä»£ä¹‹çš„æ˜¯ä¸€ç§æåº¦å›°æƒ‘å’Œä¸æ•¢ç½®ä¿¡ã€‚\r\næˆ‘:â€œä½ æ˜¯ä¸æ˜¯å“ªé‡Œä¸èˆ’æœ 
ï¼Ÿâ€æˆ‘å°å£°åœ°é—®ï¼Œç°åœ¨è½®åˆ°æˆ‘æ‹…å¿ƒä»–äº†ï¼Œâ€œä½ è„¸è‰²çœ‹èµ·æ¥ä¸å¤ªå¥½ã€‚â€\r\næ—ç™½:ä»–ç¼“ç¼“çå¼€çœ¼ï¼Œé‚£åŒè“ 
çœ¼ç›ä¸€ç¬ä¸ç¬åœ°é”ç€æˆ‘ï¼Œä»¿ä½›è¦åœ¨æˆ‘è„¸ä¸Šé’»å‡ºä¸¤ä¸ªæ´æ¥ã€‚é‚£ç§ä¸“æ³¨ï¼Œè®©æˆ‘å¿ƒè·³è«åæ¼äº†ä¸€æ‹ã€‚\r\n 
å¸æ¾ˆ:â€œæˆ‘æ²¡äº‹ã€‚â€ä»–é¡¿äº†é¡¿ï¼Œå£°éŸ³é‡Œå¸¦ç€ä¸€ä¸è‡ªå·±éƒ½æ²¡å¯Ÿè§‰çš„é¢¤æŠ–ï¼Œâ€œæˆ‘å¾ˆå¥½ã€‚â€\r\nç‰¹æ®Šå™äº‹:[ä¸€ç§
å‰æ‰€æœªæœ‰çš„ã€å¦‚åŒæººæ°´è€…å‘¼å¸åˆ°ç¬¬ä¸€å£æ–°é²œç©ºæ°”èˆ¬çš„è½»æ¾æ„Ÿï¼ŒåŒ…è£¹ç€ä»–ã€‚] -memory.fx\r\næ—ç™½:ä»–
ç«™èµ·èº«ï¼Œå°†æ¡å¥½çš„ä¹¦é€’ç»™æˆ‘ï¼Œè¿™ä¸€æ¬¡ï¼Œä»–åˆ»æ„é¿å¼€äº†ä»»ä½•å¯èƒ½çš„è‚¢ä½“æ¥è§¦ã€‚\r\næ—ç™½:ç„¶è€Œï¼Œå°±åœ¨ä»–
èˆ’å±•çœ‰å¤´çš„ç¬é—´ï¼Œä»–åƒæ˜¯å¿½ç„¶æ„ŸçŸ¥åˆ°äº†ä»€ä¹ˆï¼ŒçŒ›åœ°è¹™çœ‰ï¼Œç¢§è“çš„ç³å­”éª¤ç„¶æ”¶ç¼©ï¼Œè§†çº¿é”åˆ©åœ°è¶Šè¿‡æˆ‘ 
çš„è‚©è†€ï¼Œæœ›å‘é“¶æå¤§é“çš„å¦ä¸€å¤´ã€‚\r\næ—ç™½:é‚£é‡Œäººæ¥äººå¾€ï¼Œä»€ä¹ˆéƒ½æ²¡æœ‰ã€‚\r\næ—ç™½:ä½†ä»–è„¸ä¸Šä¸€é—ª 
è€Œè¿‡çš„å†°å†·ä¸è­¦æƒ•ï¼Œå´å’Œæˆ‘åˆšåˆšè®¤è¯†çš„é‚£ä¸ªæ¸©æŸ”å­¦é•¿åˆ¤è‹¥ä¸¤äººã€‚\r\næ—ç™½:é‚£ä»½è½¬ç¬å³é€çš„æ•Œæ„ï¼Œè®©
æˆ‘åèƒŒçªœèµ·ä¸€é˜µå‡‰æ„ã€‚\r\nchangeFigure:å¸æ¾ˆ-å¾®ç¬‘.sprite\r\nå¸æ¾ˆ:â€œä½ å«ä»€ä¹ˆåå­—ï¼Ÿâ€ä»–æ”¶å›è§† 
çº¿ï¼Œé‡æ–°å¯¹æˆ‘éœ²å‡ºä¸€ä¸ªæ¸©å’Œçš„å¾®ç¬‘ï¼Œä»¿ä½›åˆšæ‰çš„ä¸€åˆ‡åªæ˜¯æˆ‘çš„é”™è§‰ã€‚\r\n</Narrative>\r\n<options>\r\n[æˆ‘å«Playerï¼Œä½ å‘¢ï¼Ÿ]\r\n[ä½ é—®è¿™ä¸ªåšä»€ä¹ˆï¼Ÿ]\r\n[ï¼ˆæ²¡æœ‰å›ç­”ï¼Œåªæ˜¯è­¦æƒ•åœ°çœ‹ç€ä»–ï¼‰]\r\n</options>\r\n<script_actions>\r\n  <Analysis>\r\n    currentTime: Yes\r\n    chapterDeadlines: No\r\n    goodwill_SiChe: Yes\r\n    chapter_1_completed: No\r\n    currentLocation: ä¸­æµ·å¤§å­¦é“¶æé“\r\n  </Analysis>\r\n  <setVar>currentTime=2021-09-01T08:30:00Z</setVar>\r\n</script_actions>\r\n</Format>\n\n\nå¯¹è¯å†…å®¹ï¼š\nUser: ä½ å¥½"
      }
    ],
    "temperature": 0.7,
    "max_tokens": 32000,
    "stream": false
  }
}
 LOG  [OpenAIAdapter] å‘é€chatCompletionè¯·æ±‚: {"data": {"max_tokens": 32000, "messages": [[Object], [Object]], "model": "gemini-2.5-flash", "stream": false, "temperature": 0.7}, "headers": {"Authorization": "Bearer ***", "Content-Type": "application/json"}, "url": "https://buddy.cradleintro.top/v1/chat/completions"}