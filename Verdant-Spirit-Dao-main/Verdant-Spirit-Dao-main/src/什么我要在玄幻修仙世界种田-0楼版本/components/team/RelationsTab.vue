<template>
  <div class="side-tab-content p-2">
    <div v-if="store.relations.length === 0" class="text-center py-4 text-secondary">
      <i class="fas fa-info-circle mr-1"></i>æ²¡æœ‰äººé™…å…³ç³»æ•°æ®
    </div>
    <div v-else class="space-y-4">
      <div v-for="char in store.relations" :key="char.å§“å" class="bg-secondary/50 rounded-xl border border-dim p-4 shadow-sm">
        <h3 class="font-bold text-lg text-accent mb-3">
          {{ char.å§“å }}
        </h3>
        <div class="space-y-2 text-sm">
          <div>
            <span class="font-semibold">â¤ï¸ å…³ç³»:</span>
            <ul v-if="char.å…³ç³» && Object.keys(char.å…³ç³»).length > 0" class="list-disc list-inside ml-2 mt-1">
              <li v-for="(value, name) in char.å…³ç³»" :key="name" class="flex justify-between">
                <span>{{ name }}</span>
                <span class="font-semibold" :class="typeof value === 'number' ? getRelationColor(value) : ''">{{ value }}</span>
              </li>
            </ul>
            <p v-else class="text-secondary text-xs ml-2 mt-1">æš‚æ— </p>
          </div>
          <div>
            <span class="font-semibold">ğŸ™‚ æ€åº¦:</span>
            <!-- TODO: æ€åº¦çš„æ•°æ®ç»“æ„å°šæœªç¡®å®šï¼Œè¿™é‡Œæ˜¯å ä½ç¬¦ -->
            <p class="text-secondary text-xs ml-2 mt-1">å¾…å®š</p>
          </div>
        </div>
      </div>
    </div>
  </div>
</template>

<script setup lang="ts">
import { useRelationsStore } from '../../stores/systems/relationsStore';

const store = useRelationsStore();

const getRelationColor = (value: number) => {
  if (value < 0) return 'text-red-400';
  if (value > 50) return 'text-green-400';
  return 'text-gray-400';
};
</script>
